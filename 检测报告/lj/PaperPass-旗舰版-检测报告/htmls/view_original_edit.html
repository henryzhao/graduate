<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="keywords" content="">
    <meta name="description" content="">
    <title>修改文档</title>
    <link href="css/bootstrap.css" rel="stylesheet" />
    <link href="css/style.css" rel="stylesheet" />
</head>
<body>
<div class="bg-grey PLR40">

    <div class="paper-txt P30 PB0">
        <div class="alert alert-success" role="alert">此为您在“详细报告”中修改后临时保存的内容，编辑过的内容会变绿色</div>
        <p class="text-idt25" data-id="1">第三章 基于GNSS/北斗的授时时间同步</p><p class="text-idt25" data-id="2">3.1 时间同步的必要性</p><p class="text-idt25" data-id="3">3.1.1网络优化方面</p><p class="text-idt25" data-id="4">3.1.1.1网络管理系统</p><p class="text-idt25" data-id="5">目前，各种通信网大都建有各自的集中网管系统，能集中收集网络的性能数据进行统计分析，以及收集各网元设备的告警信息进行告警定位。当网上一台设备出现告警时，往往其它关联设备也出现各种告警。设备送出的告警信息中所含的时间标签是由各设备的时钟打上的，如果它们是同步的，网管设备只要把这些告警按时间排序，就可以分析出故障的源头及引起的后果。这对网上故障定位和查找故障原因是很有用的。</p><p class="text-idt25" data-id="6">3.1.1.2七号信令监测系统</p><p class="text-idt25" data-id="7">为了准确定位通信网中出现的故障类型和故障点，需要在信令流量较大的信令转接点（ Singnal Transfer Point， STP）设立信令采集点，建立一套完善的七号信令监测系统，用于监测和分析网上信令流的动向。当网上出现故障时，所有相应的信令流数据将被送往此监测系统进行分析处理，并进行快速故障定位。为避免因信令出现先后顺序的错误而产生虚假信息，必须要求所有信令流的时间信息是准确无误的，进而确保故障类型以及故障点快速定位的准确性。由于信令流的时间标签是由各信令采集点分别产生的，因此要求各个信令采集点必须保持时间同步。另外，若要利用七号信令监测系统对网络接通率和呼损率进行统计，信令采集点之间时间不同步有可能会使统计出现偏差，从而影响对整个通信网性能的评估。</p><p class="text-idt25" data-id="8">3.1.1.3安全认证系统</p><p class="text-idt25" data-id="9">通信网进行网络安全方面的优化，建立安全认证系统，以确保传递的通信信息安全。但是由于目前通信网上大部分设备时间都不一致，从而根本无法对全国的网络进行全面的评估。时间不同步直接影响到安全认证系统的建设和顺利运行。</p><p class="text-idt25" data-id="10">3.1.2提高服务质量方面</p><p class="text-idt25" data-id="11">在通信网中，计费对时间同步的要求主要表现在两个方面：一是通信网自身计费对时间同步的要求；另一个方面是网间费用结算时对时间同步要求。目前在每个交换机都有通话记录产生模块，由此模块产生话单，打上时间标签，标示出通话的起始时刻、结束时间以及通话时长，并将其送到相应的计费中心进行处理。目前，计费模块的时钟准确度都比较低，差不多在1 E-5到1 E-6的量级，这意味着两个交换机在一个月内的时间偏差可能会达到半分钟。</p><p class="text-idt25" data-id="12">各交换机之间大的时间偏差可能会导致出现有相互矛盾的话单，从而引起用户的申告。如：某用户在 10:01～10:20 通过 A 交换局打过一次长途电话，在10:22～10:30又通过 B交换局打了一个长途电话，如果 B局交换机时钟比 A局交换机时钟慢5分钟，以 A局交换机时钟为准，则 B局交换机的计费磁带上会记录这一用户的呼叫时间为10:17～10:25，反映在最终话单上就是 10:01～10:20和 10:17～10:25 分别有一个长话。也就是说在 10:17～10:20 这一时间段里，用户同时在打两个长话。在最终的用户详细话单上出现了同一时间段某用户有多个呼叫等一些不正常现象。</p><p class="text-idt25" data-id="13">如果具备准确的时间同步，可以大大提高网间结算的准确度，减少出现费用结算的纠纷，特别是随着计费单位变小（现在长途话费按6秒为单位进行计算），也要求计费要越来越准确，因此交换机等通信设备对时间准确性要求也越来越高。</p><p class="text-idt25" data-id="14">3.1.3网络及新业务方面</p><p class="text-idt25" data-id="15">3.1.3.1IP网络及应用</p><p class="text-idt25" data-id="16">在 IP网中，为了对路由选择进行监视或控制，数据包每经过一个路由器都会打上该路由器的当前时间，通过分析这些时间戳，就可以计算出各段路径所引入的时延。因此，保证各个路由器的时间同步对于分析各段路由的流量，顺利完成路由选择是十分重要的。</p><p class="text-idt25" data-id="17">对于基于 IP 的电子商务等，其网络安全性对时间同步也有严格的要求。网络安全是实现电子商务的基础，而一个通用性强，安全可靠的网络协议则是实现电子商务安全交易的关键技术之一，它也会对电子商务的整体性能产生很大的影响。安全套接层协议（Secure Sockets Layer，SSL）是目前安全电子商务交易中使用最多的协议之一。SSL 协议在“重传攻击”上，有它独到的解决办法。SSL协议为每一次安全连接产生了一个 128 位长的随机数——“连接序号”。理论上，攻击者提前无法预测此连接序号，因此不能对服务器的请求做出正确的应答。但是计算机产生的随机数是伪随机数，它的实际周期要远比2128小，更为危险的是有规律性，所以说 SSL协议并没有从根本上解决“信息重传”这种攻击方法，有效的解决方法是采用“时间戳”。但是这需要解决网络上所有节点的时间同步问题。</p><p class="text-idt25" data-id="18">在各种政务和商务文件中，时间更是十分重要的信息。在书面合同中，文件签署的日期和签名一样均是十分重要的防止文件被伪造和篡改的关键性内容。在电子文件中，同样需对文件的日期和时间信息采取安全措施，即通过数字时间戳服务（ digital time- stamp service， DTS）对文件进行安全保护，这也需要解决时间同步问题。IP 电话（voice over IP，VOIP）业务也对时间同步精度有一定要求。</p><p class="text-idt25" data-id="19">3.1.3.23G网络及新业务</p><p class="text-idt25" data-id="20">3G 网络有三种制式： WCDMA、 CDMA2000 和 TD-SCDMA，其中在CDMA2000 和 TD-SCDMA 系统中，基站系统之间需要准确的时间同步。在软切换中，如果 RNC 和 Node B 之间没有时间同步，可能导致在选择器中发生邮件指令不匹配，从而使通话连接不能建立起来。CDMA2000 和 TD-SCDMA 系统对时间同步的精度要求是 10μs。WCDMA 属于异步工作方式，其正常工作时不需要准确的时间同步。</p><p class="text-idt25" data-id="21">在 3G 网络中，将会出现一些新的移动业务，例如基于位置定位的服务等。在移动通信网中实现基于位置定位的服务有几种技术选择，其中的一种实现手段是利用手机接收附近多个基站发送的无线信号进行定位。这要求基站的精确位置是预知的，并且都是时间同步的。根据定位精度要求的不同，基站时间同步的精度要求也是不同的。一般来说，若各基站之间时间同步的误差在 1μs，则位置定位的精度大约在 300 米左右。</p><p class="text-idt25" data-id="22">除了通信网络外，时间资源作为一种重要的公共资源，在很多行业如银行、电视台、测绘、车站、调度、电力系统、导航、控制等都需要。只不过由于任务和需求的不同，对时间同步系统提供的时刻精度要求也不同，有的需要粗略的时刻，而有的则需要精确的时刻。</p><p class="text-idt25" data-id="23">3.1.4时间同步需求</p><p class="text-idt25" data-id="24">3.2 互联网时间同步</p><p class="text-idt25" data-id="25">在互联网上进行时间同步具有重要意义。随着互联网发展和延伸到社会的各个方面，在网络的其他领域对时间同步也提出了多种要求，例如各种实时的网上交易、制造过程控制、通信网络的时间配置、网络安全性设计、分布性的网络计算和处理、交通航班航路管理以及数据库文件管理和呼叫记录等多种涉及时间戳的应用，都需要精确、可靠和公认的时间。</p><p class="text-idt25" data-id="26">3.2.1 NTP协议</p><p class="text-idt25" data-id="27">NTP（Network Time Protocol）是目前应用比较广泛的网络时间协议，它是为因特网内的计算机时钟能够与网络时间同步化而设计的的协议。</p><p class="text-idt25" data-id="28"> NTP是由美国德拉瓦大学的 D. L. Mills教授于1985年提出，它是设计用来在 Internet上使不同的机器能维持相同时间的一种通讯协定，除了可以估算封包在网络上的往返延迟外，还可独立地估算计算机时钟偏差，从而实现在网络上的高精准度计算机校时。</p><p class="text-idt25" data-id="29">在通常的环境下， NTP提供的时间精确度在 WAN上为数十毫秒，在 LAN上则为亚毫秒级或者更高，在专用的时间服务器上，则精确度更高。</p><p class="text-idt25" data-id="30">3.2.1.1发展现状</p><p class="text-idt25" data-id="31">（1）网络时间协议（NTP）同步Internet中的主机和路由器的时间；</p><p class="text-idt25" data-id="32">（2）目前Internet中分布着超过100，000台NTP服务器，它们为全世界提供时间服务；</p><p class="text-idt25" data-id="33">（3）理论上，NTP为主机提供的准确性，在WAN中可以低于10ms，在LAN中可以可以低于1ms；在精确的时间源，如铯振荡器或者GPS接收器时，精确度可以达到微秒级；</p><p class="text-idt25" data-id="34">（4）守护进程现在几乎可以运行在各种工作站和服务器平台上，如Unix、Windows、VMS和嵌入式系统。</p><p class="text-idt25" data-id="35">3.2.1.2应用领域</p><p class="text-idt25" data-id="36">（1）网络故障的隔离、报告和恢复；</p><p class="text-idt25" data-id="37">（2）网络监控、测量与控制；</p><p class="text-idt25" data-id="38">（3）分布式多媒体流的同步；</p><p class="text-idt25" data-id="39">（4）确保系统之间的远程系统调用（RPC）能够正常进行，防止重播，维护序列号的唯一性；</p><p class="text-idt25" data-id="40">（5）密钥管理和生存期控制；</p><p class="text-idt25" data-id="41">（6）股票交易和购物订单等的确认时间戳。</p><p class="text-idt25" data-id="42">3.2.1.3层状结构</p><p class="text-idt25" data-id="43">时间同步网络理论上根据其精确度和重要性一般分为从0-15的共16个级别或更多级，实际上不会大于6 级。级别编码越低，精确度和重要性越高。时间的分配自级别编码小的层次向较大的层次进行，即由第 0 级向第15级分配渗透。第0级设备是时间同步网络的基准时间参考源，它位于同步子网络的顶端，目前普遍采用全球卫星定位系统，即由 GPS 播发的 UTC 时间代码。子网络中的设备可以扮演多重角色。例如一个第二层的设备，对于第一层来说是客户机；对于第三层可能是服务器；对于同层的设备则可以是对等机。这里对等机的含义是相互用 NTP 进行同步的计算设备。NTP 协议就是通过这种网络层状结构一层一层延伸下去，为 Internet 提供对时服务的。</p><p class="text-idt25" data-id="44">（1）一级服务器（Stratum 1）通过广播、卫星或者调制解调器与国家标准时间同步；</p><p class="text-idt25" data-id="45">（2）二级服务器（Stratum 2）和客户通过层状结构与一级服务器实现时间同步；</p><p class="text-idt25" data-id="46">（3）客户与服务器之间以主从、对称或者广播的模式进行通讯，可选择加密认证或不认证；</p><p class="text-idt25" data-id="47">（4）可靠性有赖于服务器的冗余性和网络路径的多样性；</p><p class="text-idt25" data-id="48">（5）工程算法可以减少抖动（Jitter），减轻多时间来源引起的误差并避免错误的服务器操作；</p><p class="text-idt25" data-id="49">（6）通过针对网络时间的抖动（Jitter）和时间振荡器频率的wander而设计的适应性算法，使得系统时间和频率能够与权威时间保持同步。</p><p class="text-idt25" data-id="50">3.2.1.4工作原理</p><p class="text-idt25" data-id="51">NTP 算法首先就要根据服务器和客户端的往返报文来确定两地时钟的差值和报文在网络中传输的延迟。这里先定义一下，客户端和时间服务器之间的时间偏差（offset）用希腊字母 表示；对时过程中的网络路径延迟（delay）用希腊字母 表示。</p><p class="text-idt25" data-id="52">和 是客户端时钟记录的发送 NTP 报文和接收 NTP 报文的时间， 和 是服务器端时钟记录的接收和发送 NTP 报文的时间。这里可以设定服务器的时钟是准确的，服务器和客户端时钟的时间偏差是，从客户端发送报文到服务器端的路径延迟是，从服务器到客户端的路径延迟是，路径延迟总和是。那么可以列出三个方程式：</p><p class="text-idt25" data-id="53">如果假设从客户端到服务器的路径延迟和从服务器到客户端的路径延迟相等：</p><p class="text-idt25" data-id="54">以上方程变为：</p><p class="text-idt25" data-id="55">可解得服务器和客户端时钟的时间偏差：</p><p class="text-idt25" data-id="56">客户端与服务器端总的网络路径延迟：</p><p class="text-idt25" data-id="57">3.2.1.5工作模式</p><p class="text-idt25" data-id="58">NTP 协议支持三种对时工作方式：</p><p class="text-idt25" data-id="59">（1）Server/Client mode（主从模式）：用户向一个或几个服务器提出服务请求，根据所交换的信息，计算两地时间偏差和网络延迟，从中选择认为最准确的时间偏差，并调整本地的时钟。</p><p class="text-idt25" data-id="60">（2）Multicast/Broadcast mode（广播模式）：此种模式适用于高速的局域网中。局域网中一个或多个服务器以固定的时间周期向某个多播地址广播自己的时标，客户端不计算时间偏差和网络延迟，直接用接收到的时标修正自己的时钟，忽略各种误差。</p><p class="text-idt25" data-id="61">（3）Symmetric mode（对称模式）：两个以上的时间服务器互为主从，进行时间消息</p><p class="text-idt25" data-id="62">的通讯，相互校正对方的时间，以维持整个同步子网的时间一致性。</p><p class="text-idt25" data-id="63">3.2.1.6报文格式</p><p class="text-idt25" data-id="64">NTP 时间戳以 64bit 无符号的定点数表示，整数部分以高 32bit 表示，相对于基准 1900.01.01 00:00:00 记录当前的秒累积数；小数部分以低 32bit 表示，其精确度可达 200 皮秒。相对于1900年，到2036年时，此64 bit数将发生溢出，即每136年，这64 bit的字段将归零，到时将再重新定义协议或废除使用此时间戳。 NTP信息在网络上传输都采用 UDP协议，端口号是123，此号码将被使用在 UDP标头里的 Source Port和 Destination Port两段中，剩余的 UDP标头栏将被设定成规格的描述。</p><p class="text-idt25" data-id="65">3.2.2 PTP协议</p><p class="text-idt25" data-id="66">1992 年 NTP 版本的同步准确度可以达到 200μs，但是仍然不能满足测量仪器和工业控制所需的准确度。为了解决测量和控制应用的分布网络定时同步的需要，具有共同利益的信息技术、自动控制、人工智能、测试测量的工程技术人员在2000年底倡议成立网络精密时钟同步委员会，2001年在 IEEE仪器和测量委员会美国标准技术研究所（ NIST）的支持下，该委员会起草的规范在2002年底获得 IEEE标准委员会通过并命名为 IEEE1588标准。IEEE1588 的全称是“网络测量和控制系统的精密时钟同步协议标准”，通常称为精密时间协议（Precision Time Protocol，PTP）。 PTP协议可以达到100 ns级的同步精度，适合于 Ethernet/ IP， Profinet， PowerLink， EtherCat等基于 LXI（ LAN based eXtensions for Instruments）总线连接的以太网络的定时同步，目前主要应用于工业自动化系统。它的基本构思是通过硬件和软件将网络设备（客户机）的内时钟与主控机的主时钟实现同步，提供同步建立时间小于10μ s的运用，与未执行 IEEE1588协议的以太网延迟时间1000μ s相比，整个网络的定时同步指标有显著的改善。</p><p class="text-idt25" data-id="67">3.2.3网络时间同步协议比较</p><p class="text-idt25" data-id="68">3.3 无线传感网时间同步</p><p class="text-idt25" data-id="69">无线传感器网络( Wireless Sensor Networks， WSN)作为传感网的基袖和重要组成部分，它提供了一种新的感知世界和信息处理的平台，是实现智能化的关键一步。</p><p class="text-idt25" data-id="70">3.3.1无线传感器网络结构</p><p class="text-idt25" data-id="71">3.3.1.1无线传感器节点结构</p><p class="text-idt25" data-id="72">无线传感器节点由四部分组成:传感器模块、处理器模块、无线通信模块和能量管理模块。</p><p class="text-idt25" data-id="73">3.3.1.2无线传感器网络系统结构</p><p class="text-idt25" data-id="74">传感节点(sensornode)通常散布在检测区域，通过无线射频通信自组为无线网络。传感器节点收集到的数据经过其他传感器节点转发或直接发送给汇集节点( sinknode)，再经由互联网、卫星网络或者检测专用网络到达任务管理中心( Task manage center)。监测数据在转发过程中可能被某些节点进行融合等处理(视不同的网络协议和应用而定)。用户在任务管理中心收集处理检测数据、发送检测任务，还可以对无线传感器网络进行管理和重新配置。</p><p class="text-idt25" data-id="75">3.3.2无线传感器网络协议结构</p><p class="text-idt25" data-id="76">无线传感器网络协议包含应用层、传输层、网络层、数据链路层和物理层的五层协议的体系结构，这是早期提出的一种协议栈。针对无线传感器网络资源受限的特点，为了节点能够高效地进行协同工作、拓扑管理和任务调度，在五层协议栈中融入了能量管理平台、移动管理平台和任务管理平台。下面简介各协议层和平台的功能：应用层包括针对各种应用的应用软件；传输层负责数据流的传输控制：网络层为来自传输层的数据提供路由选择以及路由维护；数据链路层负责数据成帧、媒体访问(MAC)和差错控制；物理层提供简单而健壮的调制技术和射频通信技术；能量、移动和任务管理平台管理传感器节点能量髙效使用，检测节点的移动、更新拓扑、更新维护路由，提供任务调度。</p><p class="text-idt25" data-id="77">3.4.3无线传感器网络特点</p><p class="text-idt25" data-id="78">3.4.3.1自组织性</p><p class="text-idt25" data-id="79">在环境监测、军事应用时，传感器节点可能是随机散布在检测区域，要求节点能够自组织为多跳网络，将感测到的数据传输到控制中心。</p><p class="text-idt25" data-id="80">3.4.3.2传感器节点资源受限</p><p class="text-idt25" data-id="81">传感器节点一般有电池供电，更换困难，所以节点能量有限；传感器节点一般价格低廉、体积小，配备的控制芯片计算处理能力有限，存储容量也非常有限。</p><p class="text-idt25" data-id="82">3.4.3.3动态拓扑</p><p class="text-idt25" data-id="83">由于传感器节点一般由电池供电，电池耗尽就会造成节点失效，工作在敌对环境下的节点可能被摧毁，无线链路受环境影响时断时续，用于水下检测的节点会有移动性，这些都会造成无线传感器网的拓扑结构动态变化。</p><p class="text-idt25" data-id="84">3.4.3.4大规模网络</p><p class="text-idt25" data-id="85">无线传感器网络通常部署在很大的检测区域，并且节点密度很大，比如森林火灾检测、环境检测。</p><p class="text-idt25" data-id="86">3.4.3.5应用相关的网络</p><p class="text-idt25" data-id="87">无线传感器网络是典型的应用型网络。对应不同的应用，需要配置不同的传感器、不同的处理器，利用不同的射频通信技术，还有不同的时间同步协议、路由协议、应用层协议等。</p><p class="text-idt25" data-id="88">3.4.3.6以数据为中心的网络</p><p class="text-idt25" data-id="89">无线传感器网络是任务型网络，关注的是任务事件信息，而不是某个ID的节点。由于传感器节点随机部署，节点位置与节点ID没有必然联系。在网络中以数据本身作为查询而不是节点ID。</p><p class="text-idt25" data-id="90">3.4.4无线传感器网络时间同步机制研究现状</p><p class="text-idt25" data-id="91">3.4.4.1RBS同步协议</p><p class="text-idt25" data-id="92">RBS (Reference Broadcast Synchronization)是典型的基于接受者-接受者的同步机制，该协议通过第三方节点广播同步信令的方式来实现节点间的同步。如图3.1所示，要实现三节点同步需要三阶段，每一阶段由参考节点( Reference Node)发送同步参考包，各同步节点( Sync Node)接到同步参考包后利用本地时钟记录下接受到该包的时刻，然后各接收节点之间交换各自记录下的接受到同步参考包的时刻，计算出时间偏移后进而两两校准时钟，实现它们之间的时间同步通过节点轮流充当第三方节点可以实现全网同步。在同步消息传播路径上，发送时间和访问时间是同步消息延迟非确定因素的最主要部分。 RBS同步协议利用了无线信道的广播特性，即对于同步参考包广播域内的所有同步节点来说，接收的同步参考包的访问时间和发送时间是相同的，从而消除了发送端延迟，广播域内节点之间的时间同步精度就得到了大大提高。通过节点轮流充当第三方节点的角色可以实现整个网络的时间同步。</p><p class="text-idt25" data-id="93">RBS机制釆用了 2中方法来提高同步精度:①最小方差线性拟合法。采用了线性拟合法估计同步节点间的相对频差；②统计技术。参考节点发送多个同步参考包，广播域内的同步节点求取接收到同步参考包的时间差的平均值，进一步消除接收处理时延的影响。接收节点间的时间漂移、接收方的非确定延迟和接受节点的数目等是影响RBS机制性能的主要因素。在多跳网络中执行RBS同步时，同步的误差随着跳数的增加而增大。</p><p class="text-idt25" data-id="94">3.4.4.2 TPSN同步协议</p><p class="text-idt25" data-id="95">TPSN (Timing-sync Protocol for Sensor Networks)同步协议是典型的基于发送者-接受者的双向报文交换同步协议。TPSN协议的实现分为两个阶段:层次建立阶段和同步阶段。在网络部署后，将根节点的层次设定为0，一般选择网关节点作为根节点，根节点广播层次发现分组，层次发现分组包含根节点的ID和层次。根节点的广播域内节点接收到这个层次发现分组后，将自己的层次级别设置为0+1，然后广播包含自己ID和层次的层次发现分组。直到网络内所有节点获取自己的层次。为了减少洪泛广播引起的能量损耗和网络堵塞，节点只回应接收到的第一个层次发现分组。在层次结构建立完成后，根节点广播时间同步分组(sync_pkt)。第1层节点收到sync_pkt退避一随机时间后，同根节点执行比对同步。第 i+1层节点侦听到第 i层节点的交换消息后，等待一个随机时间保证第 i层节点已经完成同步，然后与自己在层次发现阶段记录的第 f层的节点执行比对同步。这样，每个节点同步至的上一层节点，最终网络中所有节点都达到同步。</p><p class="text-idt25" data-id="96">假设节点A为第f层的节点，B为其第/心层的父节点，如图3.2所示，其同步过程为:节点 A向父节点 B发送同步请求包并利用本地时钟记录发送时刻 T1，节点 B收到该包后记录接收时刻的本地时间 T2，并发送包含有 T3和 T2的同步回应包，节点 A收到父节点 B发送的回应包后利用本地时钟记录接收时刻 T4。图中d表示同步消息的传播延时， 表示两个节点之间的时间偏差。假设两节点间为对称链路。则可得</p><p class="text-idt25" data-id="97">为了消除发送时延、接入时延和接收处理时延的影响，TPSN协议采用链路层(MAC)打时间戳技术。 TPSN协议实现了全网范围内节点的时间同步，但每个节点的执行同步需要传递3个同步消息，协议的同步开销较大，并且同步误差随跳数的增加而增大。TPSN协议没有对时钟的频差进行估计，节点的再同步阶段引入了由于频漂引起的时间误差，为了保持较高的时间同步精度节点就需要频繁同步。当网络拓扑发送变化(比如新节点加入)时，需要重新建立节点层次，因此协议的鲁棒性低。</p><p class="text-idt25" data-id="98">3.4.4.3FTSP时间同步协议</p><p class="text-idt25" data-id="99">FTSP (Flooding Time Synchronization Protocol)协议是典型的基于发送端的单向广播同步机制。首先 root节点作为时间基准点，发送同步报文，广播域内节点接收到该同步报文后，根据经验值估算报文传播时延等参数，再利用估计延迟调整本地时钟，从而同步至 root节点。节点同步后作为新的时间基准点，一环环向外同步，直至达到全网同步至root节点。 FTSP协议通过 MAC层打时戳、估计补偿中断等待时间和编解码时间以及字节对齐时间等技术，消除了除了传播时间外其他不确定时延的影响，同时对时钟漂移和偏差进行了线性回归分析，补偿了时钟漂移带来的误差，同步精度达到了微秒级。FTSP协议还考虑了 root节点的选举机制、root节点失效问题。节点如果超过设定数目的同步周期仍然未收到同步报文就宣布自己是root节点。当多个节点同时宣布自己为root节点时，节点标识ID最小的节点当选为root节点。这样保证同步协议在网络拓扑结构变化和链路或节点的失效时的健壮性。</p><p class="text-idt25" data-id="100">3.4.4.4 mini-sync 和 tiny-sync 同步算法</p><p class="text-idt25" data-id="101"> mini- sync和 tiny- sync是两个轻量级的时间同步算法，它们假设节点时钟晶振频率是稳定的，节点的时钟可以表示为理想时间 t单调非递减线性函数。利用ai表示节点i的时钟频偏， bi表示节点/的相偏，则有以下时钟模型:</p><p class="text-idt25" data-id="102">利用a12表示两个节点时钟的相对频偏， b12表示两个节点时钟的相对相偏，则可以推导出两个节点的时钟关系:</p><p class="text-idt25" data-id="103">mini-sync和tiny-syne算法釆用双向报文交换同步机制。如上图所示，节点1向节点2发送一个包含发送时刻t0探测报文(probe_pkt)， t0为利用节点1的本地时钟记录的发送时刻。节点2接收到 probe_ pkt后，立即返回包含节点2时钟记录下接收 probe_ pkt的时刻 tb的消息给节点1，节点1收到消息后利用本地时钟打上一个时标 tr这样就得到一个包含三个时标的数据点，显然三个时标满足以下关系:</p><p class="text-idt25" data-id="104">由上式可以确定参数a12和b12的取值范围。经过多次探测报文交换可以获得一组数据点，通过求这些数据点约束下的线性规划最优解可以得出a12和b12的最精确值。</p><p class="text-idt25" data-id="105">假设节点时钟漂移和偏移恒定， mini- sync和 tiny- sync同步算法仅需要很少的存储容量和处理资源，非常适合资源受限的无线传感器网络，但低成本的无线节点一般都配置较低稳定度的晶振，很难保证时钟漂移和偏移恒定。</p><p class="text-idt25" data-id="106">3.4.4.5TPSN协议</p><p class="text-idt25" data-id="107">传感器网络时间同步协议( Timing- sync protocol for Sensor Networks)类似于传统网络的 NTP时间同步协议，可以提供传感器网络全网范围内节点间的时间同步”协议实现的前提条件是:在网络中有一个可以与外界时间精确同步的节点称为根节点，根节点可装配如GPS接收机的复杂硬件部件，并作为整个网络系统的时钟源节点。</p><p class="text-idt25" data-id="108">3.4.4.6LTS算法</p><p class="text-idt25" data-id="109">有些传感器网络应用对于时间同步的精度要求并不是很高，也不需要整个网络的所有节点都达到时间同步，这样就可以使用简单的轻量的时间同步机制，通过减少时间同步的频率和参与同步的节点数目，在满足同步精度要求的同时降低节点的通信和计算开销，减少网络能量的消耗轻量级生成树同步算法（ LTS， Lightweight Tree- based Synchronization)就适合这种传感器网络应用。LTS算法具有鲁棒性和自配置的特点，特别是在出现节点失效!动态调整信道和节点移动情况下， LTS算法仍能够正常工作”在分析单跳节点对之间基于发送一接收方式的时间同步机制基础上， J. Greunen和 J. Rabaey提出了集中式和分布式两类 LTS多跳时间同步算法。</p><p class="text-idt25" data-id="110">3.4.4.5时间同步算法性能比较</p><p class="text-idt25" data-id="111">3.4 本章小结</p><p class="text-idt25" data-id="112">本章介绍了基于北斗和 GNSS的授时相关内容，首先从时间同步的必要性、互联网时间同步无线传感网时间同步等方面介绍了时间同步的方法，同时对时间同步的算法性能给出了比较，为后面实验的设计和实现提供了必要的基础。</p>        <div class="paper-footer">
            <p>检测报告由<a href="http://www.paperpass.com/" target="_black">PaperPass</a>文献相似度检测系统生成</p>
            <p>Copyright © 2007-2018 PaperPass</p>
        </div>
    </div>

</div>
</body>
<script type="text/javascript" src="js/jquery.min.js"></script>
<script type="text/javascript" src="js/Lib.js"></script>
<script type="text/javascript">
    Report.report_id = '5ad73f37ebebec514';
</script>
<script type="text/javascript">
    (function(System,$){
        var cache = new System.Cache(System.report_id,localStorage);
        $(function(){
            $.each(cache.get(),function(){
                $('[data-id='+this.id+']').addClass('g-font-color green').html(this.text);
            });

        });
    })(Report,jQuery);

</script>
</html>
